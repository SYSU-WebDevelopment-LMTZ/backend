webpackJsonp([3],{MctR:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={props:["businessData"],data:function(){return{startDate:"2018/06/15",endDate:"2018/06/29",dataMap:[],orders:o,inputDate:"",loading:!0,pages:1}},components:{headtop:e("riiq").a},created:function(){Array.prototype.push_front=function(t){this.splice(0,0,t)},this.getOrdetData()},methods:{searchData:function(t){this.startDate=this.inputDate[0],this.endDate=this.inputDate[1],void 0!=this.startDate&&void 0!=this.endDate&&(this.loading=!0,this.getBusinessData(),this.loading=!1)},getOrdetData:function(){var t=this;this.$axios.get("/orders",{params:{merchant_id:1}}).then(function(a){t.orders=a.data.data,console.log(t.orders),t.setTotalPrice(t.orders),t.getBusinessData(),t.loading=!1})},getBusinessData:function(){this.dataMap=[];var t,a=this.dataMap;t=0!=a.length?a[0].date:void 0,a.length>1&&a[a.length-1].date,this.computeData(this.startDate,this.endDate)},computeData:function(t,a){for(var e=new Date(t),r=new Date(a),o=e;o<r;){var n=this.getDayData(o);this.dataMap.push_front(n),o=new Date(o.getTime()+864e5)}},getDayData:function(t){var a=this.orders,e=void 0,r=(Math.round(1e4*Math.random()),{date:t.toLocaleDateString(),total_price:0,total_orders:0,total_customers:0});return a.forEach(function(t){e=new Date(t.create_at),r.date==e.toLocaleDateString()&&(r.total_price+=t.total_price,r.total_orders+=1,r.total_customers+=t.num_of_people)}),r},setTotalPrice:function(t){t.forEach(function(t){var a=0;t.foods.split("|").forEach(function(t){var e=t.split(",");a+=parseFloat(e[1])*parseFloat(e[2])}),t.total_price=a})}}},o=[{order_id:23,merchant_id:1,merchant_name:"兰州牛肉",merchant_tel:"12341234123",open_id:"abc",desk_id:2,num_of_people:3,paid:!0,foods:["汉堡, 12.5, 1","芝士蛋糕, 22.5, 2"],remark:"不要辣",create_at:"Thu Jun 28 2018 23:52:21 GMT+0800 (CST)"},{order_id:33,merchant_id:1,merchant_name:"兰州牛肉",merchant_tel:"12341234123",open_id:"abc",desk_id:2,num_of_people:3,paid:!0,foods:["汉堡, 12.5, 1","芝士蛋糕, 22.5, 2"],remark:"不要辣",create_at:"Thu Jun 28 2018 23:52:21 GMT+0800 (CST)"}],n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"business-data"},[e("headtop"),t._v(" "),e("el-date-picker",{staticClass:"date-picker",attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.inputDate,callback:function(a){t.inputDate=a},expression:"inputDate"}}),t._v(" "),e("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.searchData}},[t._v("搜索")]),t._v(" "),e("el-table",{staticClass:"data-table",staticStyle:{width:"100%"},attrs:{border:"",data:t.dataMap}},[e("el-table-column",{attrs:{label:"下单日期",prop:"date"}}),t._v(" "),e("el-table-column",{attrs:{label:"总销售额",prop:"total_price"}}),t._v(" "),e("el-table-column",{attrs:{label:"总订单数",prop:"total_orders"}}),t._v(" "),e("el-table-column",{attrs:{label:"顾客总数",prop:"total_customers"}})],1),t._v(" "),e("el-pagination",{staticClass:"pagination",attrs:{layout:"prev, pager, next",total:t.pages}})],1)},staticRenderFns:[]};var s=e("C7Lr")(r,n,!1,function(t){e("TP27")},null,null);a.default=s.exports},TP27:function(t,a){}});
//# sourceMappingURL=3.fd9b462a94d12086a386.js.map